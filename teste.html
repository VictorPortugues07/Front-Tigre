<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard Tigre - Protótipo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Tigre Forecast</a>
        <div class="collapse navbar-collapse">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a class="nav-link active" href="#top10">Top 10</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#exploracao">Exploração por SKU</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#insights">Insights</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container mt-4">
      <!-- Top 10 Section -->
      <section id="top10">
        <h2>Top 10 SKUs mais vendidos</h2>
        <div class="row" id="cardsTop10"></div>
        <canvas id="chartTop10" height="100"></canvas>
      </section>

      <hr />

      <!-- Exploração por SKU -->
      <section id="exploracao">
        <h2>Exploração por SKU</h2>
        <div class="mb-3">
          <label for="skuSelect" class="form-label">Escolha um SKU:</label>
          <select id="skuSelect" class="form-select">
            <option selected>84430626 (exemplo)</option>
            <option>84430729</option>
            <option>84430832</option>
          </select>
        </div>
        <canvas id="chartSKU" height="100"></canvas>
      </section>

      <hr />

      <!-- Insights -->
      <section id="insights">
        <h2>Insights</h2>
        <p>Exemplo: SKUs em queda no último semestre (mock).</p>
        <ul class="list-group">
          <li class="list-group-item">SKU 84110002 - queda de 15%</li>
          <li class="list-group-item">SKU 84110005 - queda de 8%</li>
          <li class="list-group-item">SKU 84110009 - queda de 5%</li>
        </ul>
      </section>
    </div>

    <script>
      // Dados extraídos da planilha
      const top10Data = [
        { cdProduto: 84430626, soma: 47323 },
        { cdProduto: 84430729, soma: 47323 },
        { cdProduto: 84430832, soma: 47323 },
      ];

      const serieSKU = [
        { mes: "AGO 2022", vendas: 2260 },
        { mes: "SET 2022", vendas: 2896 },
        { mes: "OUT 2022", vendas: 2186 },
        { mes: "NOV 2022", vendas: 3000 },
        { mes: "DEZ 2022", vendas: 1262 },
      ];

      // Renderizar cards Top 10
      const cardsDiv = document.getElementById("cardsTop10");
      top10Data.forEach((item) => {
        const card = document.createElement("div");
        card.className = "col-md-3 mb-3";
        card.innerHTML = `
        <div class="card shadow-sm">
          <div class="card-body">
            <h5 class="card-title">SKU ${item.cdProduto}</h5>
            <p class="card-text">Total vendido: ${item.soma}</p>
          </div>
        </div>
      `;
        cardsDiv.appendChild(card);
      });

      // Gráfico Top 10
      const ctxTop10 = document.getElementById("chartTop10");
      new Chart(ctxTop10, {
        type: "bar",
        data: {
          labels: top10Data.map((d) => d.cdProduto),
          datasets: [
            {
              label: "Total de vendas",
              data: top10Data.map((d) => d.soma),
              backgroundColor: "rgba(54, 162, 235, 0.7)",
            },
          ],
        },
      });

      // Gráfico SKU individual
      const ctxSKU = document.getElementById("chartSKU");
      new Chart(ctxSKU, {
        type: "line",
        data: {
          labels: serieSKU.map((d) => d.mes),
          datasets: [
            {
              label: "Vendas",
              data: serieSKU.map((d) => d.vendas),
              borderColor: "rgba(255, 99, 132, 1)",
              fill: false,
            },
          ],
        },
      });
    </script>
  </body>
</html>
